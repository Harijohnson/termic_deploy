{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Table,Button,Row,Col}from'react-bootstrap';import Loader from'../components/Loader';import Message from'../components/Message';import{useDispatch,useSelector}from'react-redux';import{LinkContainer}from'react-router-bootstrap';import{listProducts,deleteProduct,createProduct}from'../actions/productActions';import{useNavigate,useParams}from'react-router-dom';import{PRODUCT_CREATE_RESET}from'../constants/productConstants';import Paginate from'../components/Paginate';import{useLocation}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductListScreen(){const dispatch=useDispatch();const navigate=useNavigate();const{id}=useParams();// const orderId = match.params.id\nconst userId=id;const productList=useSelector(state=>state.productList);const{loading,error,products,page,pages}=productList;const productDelete=useSelector(state=>state.productDelete);const{loading:loadingDelete,error:errorDelete,success:successDelete}=productDelete;const productCreate=useSelector(state=>state.productCreate);const{loading:loadingCreate,error:errorCreate,success:successCreate,product:createdProduct}=productCreate;const userLogin=useSelector(state=>state.userLogin);//get the user info \nconst{userInfo}=userLogin;let location=useLocation();let keyword=location.search;useEffect(()=>{dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo.isAdmin){navigate('/login');}if(successCreate){navigate(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts(keyword));}},[dispatch,navigate,userInfo,successDelete,successCreate,createdProduct,keyword]);const deleteHandler=id=>{if(window.confirm('Are you sure you want to delete this product ?')){// delete product\ndispatch(deleteProduct(id));}};const createProductHandler=()=>{//create product\ndispatch(createProduct());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"})}),/*#__PURE__*/_jsx(Col,{className:\"d-flex justify-content-end\",children:/*#__PURE__*/_jsxs(Button,{className:\"btn\",style:{marginRight:'40px'},onClick:createProductHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\",children:\"   \"}),'  ',\" Create Product\"]})})]}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"                    ID                  \"}),/*#__PURE__*/_jsx(\"th\",{children:\"                    Name                  \"}),/*#__PURE__*/_jsx(\"th\",{children:\"                      Price                \"}),/*#__PURE__*/_jsx(\"th\",{children:\"                    Category                  \"}),/*#__PURE__*/_jsx(\"th\",{children:\"                    Brand                  \"}),/*#__PURE__*/_jsx(\"th\",{children:\"              \"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsx(\"td\",{children:product.price}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.brand}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:()=>deleteHandler(product._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},product._id))})]}),/*#__PURE__*/_jsx(Paginate,{page:page,pages:pages,isAdmin:true})]})]});}export default ProductListScreen;","map":{"version":3,"names":["React","useEffect","useState","Table","Button","Row","Col","Loader","Message","useDispatch","useSelector","LinkContainer","listProducts","deleteProduct","createProduct","useNavigate","useParams","PRODUCT_CREATE_RESET","Paginate","useLocation","jsx","_jsx","jsxs","_jsxs","ProductListScreen","dispatch","navigate","id","userId","productList","state","loading","error","products","page","pages","productDelete","loadingDelete","errorDelete","success","successDelete","productCreate","loadingCreate","errorCreate","successCreate","product","createdProduct","userLogin","userInfo","location","keyword","search","type","isAdmin","concat","_id","deleteHandler","window","confirm","createProductHandler","children","className","style","marginRight","onClick","variant","striped","bordered","hover","responsive","map","name","price","category","brand","to"],"sources":["C:/Users/HARI_JOHNSON/Desktop/digital-shop/termic_deploy/termic_backend/termic_shop/src/screens/ProductListScreen.jsx"],"sourcesContent":["import React,{ useEffect,useState } from 'react'\r\nimport { Table,Button,Row,Col } from 'react-bootstrap'\r\nimport  Loader   from '../components/Loader'\r\nimport  Message   from '../components/Message'\r\nimport { useDispatch,useSelector } from 'react-redux'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { listProducts,deleteProduct,createProduct } from '../actions/productActions'\r\nimport { useNavigate,useParams } from 'react-router-dom'\r\nimport { PRODUCT_CREATE_RESET } from '../constants/productConstants'\r\nimport Paginate from '../components/Paginate'\r\nimport { useLocation } from 'react-router-dom';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction ProductListScreen() {\r\n\r\n    const dispatch =useDispatch()\r\n    const navigate = useNavigate();\r\n\r\n    const  { id } = useParams();\r\n    // const orderId = match.params.id\r\n\r\n    const userId  = id\r\n\r\n\r\n    const productList  = useSelector(state => state.productList)\r\n    const { loading ,error, products,page,pages } = productList\r\n\r\n\r\n\r\n    const productDelete  = useSelector(state => state.productDelete)\r\n    const { loading:loadingDelete ,error:errorDelete, success:successDelete } = productDelete\r\n\r\n\r\n\r\n    const productCreate  = useSelector(state => state.productCreate)\r\n    const { loading:loadingCreate ,error:errorCreate, success:successCreate ,product:createdProduct } = productCreate\r\n\r\n\r\n\r\n\r\n    const userLogin  = useSelector(state => state.userLogin)  //get the user info \r\n    const { userInfo } = userLogin\r\n\r\n\r\n    let location = useLocation();\r\n   let keyword = location.search\r\n  \r\n\r\n    useEffect (() => {\r\n\r\n\r\n      dispatch({type:PRODUCT_CREATE_RESET})\r\n\r\n\r\n      if( !userInfo.isAdmin){\r\n        navigate('/login')\r\n      }\r\n\r\n\r\n      if (successCreate){\r\n        navigate(`/admin/product/${createdProduct._id}/edit`)\r\n      }else{\r\n        dispatch(listProducts(keyword))\r\n      }\r\n    },[dispatch,navigate,userInfo,successDelete,successCreate,createdProduct,keyword])\r\n\r\n\r\n\r\n\r\n    const deleteHandler =(id) => {\r\n      if(window.confirm('Are you sure you want to delete this product ?')){\r\n      // delete product\r\n      dispatch(deleteProduct(id))\r\n      }\r\n    }\r\n\r\n\r\n    const createProductHandler = () => {\r\n        //create product\r\n        dispatch(createProduct())\r\n\r\n    }\r\n\r\n\r\n  return (\r\n    <div>\r\n    <Row className='align-items-center'>\r\n        <Col>\r\n            <h1>Products</h1>\r\n        </Col>\r\n        <Col className='d-flex justify-content-end'>\r\n            <Button className='btn'\r\n            style={{ marginRight: '40px' }} \r\n            onClick={createProductHandler}\r\n            >\r\n\r\n                <i className='fas fa-plus'>   </i>{'  '} Create Product\r\n            </Button>\r\n        </Col>\r\n    </Row>\r\n\r\n    {loadingDelete && <Loader />}\r\n    {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\r\n\r\n\r\n    {loadingCreate && <Loader />}\r\n    {errorCreate && <Message variant='danger'>{errorCreate}</Message>}\r\n\r\n\r\n\r\n\r\n        {loading ?\r\n        (<Loader />)\r\n          :\r\n          error  ?\r\n          (<Message variant='danger'>{error}</Message> )\r\n          : (\r\n            <div>\r\n                <Table striped bordered hover responsive className='table-sm'>\r\n\r\n                  <thead>\r\n                    <tr>\r\n                        <th>                    ID                  </th>\r\n                        <th>                    Name                  </th>\r\n                        <th>                      Price                </th>\r\n                        <th>                    Category                  </th>\r\n                        <th>                    Brand                  </th>\r\n                        <th>              </th>\r\n                    </tr>\r\n                  </thead>\r\n\r\n\r\n                  <tbody>\r\n                    {products.map(product => (\r\n                      <tr key={product._id}>\r\n                        <td>{product._id}</td>\r\n                        <td>{product.name}</td>\r\n                        <td>{product.price}</td>\r\n                        <td>{product.category}</td>\r\n                        <td>{product.brand}</td>\r\n\r\n                          <td>\r\n                              <LinkContainer to={`/admin/product/${product._id}/edit`}>\r\n                              <Button variant='light' className='btn-sm'>\r\n                                <i className='fas fa-edit'></i>\r\n                              </Button>\r\n                              </LinkContainer>\r\n                              \r\n                              <Button variant='danger' className='btn-sm' onClick={() => deleteHandler(product._id)}>\r\n                                <i className='fas fa-trash'></i>\r\n                              </Button>\r\n                          </td>\r\n\r\n                          \r\n                        </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </Table>\r\n\r\n\r\n                <Paginate page={page} pages={pages} isAdmin={true}></Paginate>\r\n            </div>\r\n          ) }\r\n  </div>\r\n  )\r\n}\r\n\r\nexport default ProductListScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}